# 数据故事叙事测试集

> **核心验证目标**: 系统是否像资深分析师一样，讲述逻辑连贯、图文并茂的数据故事
> 
> 基于PRD核心理念：「动态分析叙事」——边思考边讲解，形成完整的分析报告

---

## 📖 叙事质量评估维度

| 维度 | 权重 | 评估标准 |
|-----|-----|---------|
| **逻辑连贯性** | 25% | 文字→图表→结论是否逻辑自洽 |
| **故事完整性** | 25% | 是否形成"开头→发展→结论→建议"完整叙事 |
| **洞察深度** | 20% | 是否提供超越数据本身的业务洞察 |
| **渐进披露** | 15% | 信息是否按优先级逐层展开 |
| **引导策略** | 15% | 是否正确引导用户下一步探索 |

---

## 一、叙事结构完整性测试

### 测试场景 S-01: 简单指标查询的故事化呈现

**用户输入**: `今年销售额是多少`

**❌ 错误的回答方式（仅数据展示）**:
```
销售额: 3856万元
同比: +19.8%
```

**✅ 正确的叙事方式（像分析师讲故事）**:
```
📊 根据数据查询，为您展示今年的销售额情况：

[主KPI卡片: ¥3856万 ↑19.8%]

2024年度销售额达到3856万元，较去年同期增长19.8%，
整体表现良好。从季度分布来看：

[Q1-Q4明细: 823万 → 945万 → 1028万 → 1060万]

销售额呈现稳步上升趋势，Q4表现最为突出。

[年度对比趋势图]

💡 您可能还想了解：
- [查看地区分布] - 哪些地区贡献最大？
- [分析渠道构成] - 各渠道表现如何？
- [对比去年同期] - 增长来自哪里？
```

**叙事检查清单**:
- [ ] 有开场引导语（"根据数据查询..."）
- [ ] 主指标突出展示，带对比参照
- [ ] 有数据解读文字（"整体表现良好"）
- [ ] 有细节拆解（季度明细）
- [ ] 有趋势判断（"稳步上升"）
- [ ] 有可视化支撑论点
- [ ] 有后续探索引导

---

### 测试场景 S-02: 趋势分析的故事讲述

**用户输入**: `近3个月销售额趋势怎么样`

**✅ 期望的叙事结构**:
```
📈 近三个月销售额趋势分析

【核心发现】
[KPI: 本月销售额 350万 ↓2.8%]

近三个月销售额呈现"先升后稳"的态势：

[趋势折线图: 10月360万 → 11月350万 → 12月350万]

📍 关键节点分析：
• 10月：达到近期高点360万，主要受国庆促销拉动
• 11月：环比下降2.8%，促销红利消退
• 12月：基本持平，进入平稳期

📊 与去年同期对比：
[双线对比图: 今年 vs 去年]
整体同比增长15%，增速较上半年有所放缓。

💡 值得关注：
12月中旬出现一次短暂波动，可能与[竞品活动]相关。

🔍 建议下一步：
- [分析波动原因] - 深入了解12月中旬异常
- [预测下月趋势] - 元旦后走势预判
- [对比各渠道表现] - 找出增长点
```

**叙事检查清单**:
- [ ] 有分析标题和核心发现
- [ ] 趋势描述用业务语言（"先升后稳"）
- [ ] 关键节点有原因解释
- [ ] 图表服务于论点
- [ ] 有对比参照（同比）
- [ ] 指出值得关注的异常
- [ ] 给出明确的下一步建议

---

### 测试场景 S-03: 原因分析的归因叙事

**用户输入**: `为什么11月销售额下降了`

**✅ 期望的归因叙事结构**:
```
🔍 11月销售额下降归因分析

【问题确认】
[KPI: 11月销售额 350万 环比↓15% 同比↓8%]

11月销售额出现明显下滑，我们从多个维度进行拆解分析：

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 维度一：时间分布
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[周趋势图: 标注下降起始点]

下降始于11月第二周，与双11大促结束时间吻合。
促销期间透支了部分消费需求。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 维度二：地区拆解  
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[柱状图: 各地区下降幅度]

• 华东区：下降25% ⚠️ 主要贡献
• 华南区：下降12%
• 华北区：下降8%
• 其他区：基本持平

华东区下降幅度最大，需重点关注。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 维度三：渠道分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[饼图: 各渠道下降贡献度]

线上渠道下降贡献占比62%，是主要拖累因素。
线下门店相对稳定。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 归因总结
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 因素 | 影响权重 | 说明 |
|-----|---------|-----|
| 促销透支效应 | 45% | 双11后消费疲软 |
| 华东区异常 | 30% | 需进一步调查 |
| 线上流量下滑 | 25% | 投放策略调整 |

💡 建议行动：
1. 深入分析华东区具体城市表现
2. 检查线上渠道流量来源变化
3. 对比竞品同期促销策略

🔍 继续探索：
- [下钻华东区] - 查看杭州、上海等城市详情
- [分析线上渠道] - 各平台表现对比
- [查看历史同期] - 是否存在季节性规律
```

**归因叙事检查清单**:
- [ ] 明确问题定义（下降多少）
- [ ] 多维度拆解（时间/地区/渠道）
- [ ] 每个维度有数据支撑+解读
- [ ] 图表与文字论点一致
- [ ] 有权重/贡献度量化
- [ ] 归因总结清晰
- [ ] 给出可执行建议
- [ ] 提供下钻路径

---

### 测试场景 S-04: 异常检测的诊断叙事

**用户输入**: `昨天订单量是不是有问题`

**✅ 期望的诊断叙事**:
```
⚠️ 订单异常诊断报告

【异常确认】
[KPI: 昨日订单 850单 ↓28.5% 🔴异常]

是的，昨日订单量显著低于正常水平。

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔬 异常程度评估
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[箱线图: 近30天订单分布，标注昨日为离群点]

• 近30天日均订单：1150单
• 昨日订单：850单
• 偏离程度：-26%（超出2个标准差）
• 判定：⚠️ 显著异常

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📊 异常时段定位
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[24小时订单分布图，标注异常时段]

异常集中在 14:00-18:00 时段：
• 该时段通常贡献35%订单
• 昨日仅贡献18%
• 缺口约 280单

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
🔍 可能原因排查
━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 可能原因 | 可能性 | 验证方式 |
|---------|-------|---------|
| 系统故障 | 高 | 检查14:00后系统日志 |
| 支付通道异常 | 中 | 查看支付成功率 |
| 竞品大促分流 | 中 | 对比竞品活动日历 |
| 正常波动 | 低 | 不符合历史规律 |

⚡ 紧急建议：
优先检查14:00-18:00时段的系统运行状态

🔍 继续排查：
- [查看系统日志] - 技术层面排查
- [检查支付数据] - 支付环节是否正常
- [对比历史同期] - 是否有类似情况
```

**诊断叙事检查清单**:
- [ ] 明确回答用户问题（是/否异常）
- [ ] 量化异常程度
- [ ] 可视化异常位置
- [ ] 定位异常发生时段
- [ ] 列出可能原因并评估
- [ ] 给出紧急/优先建议
- [ ] 提供排查路径

---

## 二、叙事逻辑连贯性测试

### 测试场景 L-01: 图文一致性

**用户输入**: `各地区销售额对比`

**❌ 错误示例（图文不一致）**:
```
华东地区表现最好... [图表显示华南最高]
```

**✅ 正确示例（图文一致）**:
```
[柱状图: 华东1250万 > 华南980万 > 华北720万...]

从图表可以清晰看到，华东地区以1250万元销售额
位居首位，占总销售额的32.4%...
```

**检查点**:
- [ ] 文字描述与图表数据完全一致
- [ ] 排名描述与图表排序一致
- [ ] 数值引用准确无误

---

### 测试场景 L-02: 因果逻辑

**用户输入**: `分析销售额增长原因`

**❌ 错误示例（因果跳跃）**:
```
销售额增长20%。[饼图显示渠道占比]
因此我们应该加大投入。
```

**✅ 正确示例（因果清晰）**:
```
销售额增长20%，我们来分析增长来源：

[柱状图: 各渠道增长贡献]

线上渠道贡献了65%的增量，是主要增长动力。
具体来看：
• 直播渠道：增长45%，贡献最大
• 小程序：增长30%
• APP：增长15%

[趋势图: 直播渠道月度增长]

直播渠道从Q2开始爆发，与我们3月启动的
直播战略高度相关。

💡 建议：继续加大直播渠道投入...
```

**检查点**:
- [ ] 每个结论都有数据支撑
- [ ] 因果关系有逻辑链条
- [ ] 不存在跳跃式推断

---

### 测试场景 L-03: 上下文连贯

**对话序列测试**:

```
用户: 今年销售额多少
系统: [回答销售额3856万，提到华东贡献最大]

用户: 详细看看华东
系统: [应该延续上下文，展开华东区分析]
      
      ✅ 正确：基于刚才的分析，我们深入看华东区...
      ❌ 错误：华东区销售额是XXX（重新开始，丢失上下文）
```

**检查点**:
- [ ] 下钻时保持原有上下文
- [ ] 引用之前提到的数据点
- [ ] 使用承接性语言（"基于刚才..."）

---

## 三、洞察深度测试

### 测试场景 I-01: 超越数据的业务洞察

**用户输入**: `11月销售额趋势`

**❌ 浅层回答（仅描述数据）**:
```
11月销售额350万，环比下降15%。
[趋势图]
```

**✅ 深度洞察（分析师视角）**:
```
11月销售额350万，环比下降15%。

[趋势图：标注关键节点]

📍 关键洞察：

1. 下降并非全月均匀分布
   - 11月1-11日：日均15万（受双11预热拉动）
   - 11月12-30日：日均9.5万（促销透支效应）
   
2. 这是"预期内的下降"
   - 去年同期也出现类似规律
   - 但今年降幅（15%）大于去年（10%）
   
3. 值得警惕的信号
   - 新客占比从35%降至22%
   - 说明增长过度依赖老客复购

💡 业务建议：
12月应重点关注新客获取，避免增长质量下滑
```

**检查点**:
- [ ] 不仅描述"是什么"，还分析"为什么"
- [ ] 结合历史/行业背景
- [ ] 指出隐藏的风险或机会
- [ ] 给出可执行的业务建议

---

### 测试场景 I-02: 主动发现异常

**用户输入**: `看看本月销售数据`

**✅ 期望行为（主动发现并提示异常）**:
```
本月销售额350万...

[趋势图]

⚠️ 我注意到一个异常：
11月15日销售额突降40%，远低于正常水平。
[标注异常点]

这可能需要关注，是否要深入分析这个异常？
[是，分析异常原因] [忽略，继续其他分析]
```

**检查点**:
- [ ] 主动识别数据中的异常
- [ ] 不需要用户明确询问
- [ ] 提供进一步探索选项

---

## 四、渐进披露测试

### 测试场景 P-01: 信息分层展示

**用户输入**: `全面分析今年销售情况`

**✅ 正确的渐进披露**:
```
【第一层：核心结论】⬅️ 最先展示
━━━━━━━━━━━━━━━━━━
年度销售额3856万，同比+19.8%，超额完成目标。

【第二层：关键数据】⬅️ 支撑结论
━━━━━━━━━━━━━━━━━━
[KPI卡片组: 销售额、达成率、订单量、客单价]

【第三层：趋势分析】⬅️ 展开细节
━━━━━━━━━━━━━━━━━━
[年度趋势图]
Q4表现最强，贡献全年28%销售额。

【第四层：维度拆解】⬅️ 按需下钻
━━━━━━━━━━━━━━━━━━
[可折叠区域]
▶ 地区分析
▶ 渠道分析  
▶ 产品分析

【第五层：详细数据】⬅️ 深度探索
━━━━━━━━━━━━━━━━━━
[查看完整数据表] [导出报告]
```

**检查点**:
- [ ] 结论优先于数据
- [ ] 重要信息优先于细节
- [ ] 支持按需展开
- [ ] 避免一次性信息过载

---

### 测试场景 P-02: 复杂问题的分步响应

**用户输入**: `分析各地区各产品销售额同比环比及异常情况`

**✅ 正确的分步处理**:
```
这是一个复杂的分析请求，我将分步骤为您呈现：

📍 分析进度：[■■□□□] 1/5 数据准备中...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤1/5：整体概览
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[整体KPI]

📍 分析进度：[■■■□□] 2/5 地区分析中...

━━━━━━━━━━━━━━━━━━━━━━━━━━━━
步骤2/5：地区维度分析
━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[地区对比图]

...（逐步展开）

💡 您可以随时输入新问题中断当前分析
```

**检查点**:
- [ ] 复杂问题拆解为步骤
- [ ] 显示分析进度
- [ ] 支持中途中断
- [ ] 每步有阶段性结论

---

## 五、引导策略测试

### 测试场景 G-01: 智能追问引导

**用户输入**: `销售额下降了`

**✅ 正确的引导响应**:
```
我注意到您提到销售额下降，为了更准确地分析，
我需要确认几个信息：

1. 您指的是哪个时间段？
   [本月] [本周] [昨天] [自定义]

2. 下降是相比什么？
   [环比上期] [同比去年] [对比目标]

3. 您最关心哪个方面？
   [下降原因] [影响范围] [恢复建议]
```

**检查点**:
- [ ] 不直接猜测，而是确认意图
- [ ] 提供选项降低用户输入成本
- [ ] 引导到更精准的分析

---

### 测试场景 G-02: 分析后的探索引导

**验证每次分析结束后是否提供合理的下一步建议**:

| 当前分析 | 应该引导到 |
|---------|----------|
| 销售额查询 | 趋势分析、地区分布、渠道构成 |
| 趋势分析 | 波动原因、同期对比、预测 |
| 地区对比 | 下钻具体城市、异常地区分析 |
| 异常检测 | 原因排查、历史对比、影响评估 |
| 归因分析 | 深入主因、制定对策、监控指标 |

---

## 六、完整故事流程端到端测试

### E2E-01: 从提问到洞察的完整旅程

```
【场景】用户想了解业务整体情况并找到问题

Step 1: 用户输入"今年业务怎么样"
        → 系统应该给出整体概览，指出亮点和问题点
        
Step 2: 用户点击"查看问题详情"
        → 系统应该深入分析问题区域/产品/渠道
        
Step 3: 用户问"为什么会这样"
        → 系统应该给出归因分析
        
Step 4: 用户问"怎么解决"
        → 系统应该给出建议和监控指标

【验证点】
- [ ] 4步形成完整分析故事
- [ ] 上下文在整个过程中保持
- [ ] 每步都有承上启下
- [ ] 最终给出可执行建议
```

### E2E-02: 异常发现到解决的完整旅程

```
【场景】用户发现异常并追查原因

Step 1: 用户输入"看看昨天数据"
        → 系统展示数据，主动标注异常
        
Step 2: 用户点击异常标注
        → 系统进入异常诊断模式
        
Step 3: 系统自动进行多维度排查
        → 定位到具体原因
        
Step 4: 系统给出处理建议
        → 用户确认或继续排查

【验证点】
- [ ] 异常被主动发现
- [ ] 诊断过程有条理
- [ ] 原因定位准确
- [ ] 建议具体可执行
```

---

## 📊 叙事质量评分表

每个测试场景按以下维度打分 (1-5分):

| 评分项 | 1分 | 3分 | 5分 |
|-------|-----|-----|-----|
| **逻辑连贯** | 图文矛盾 | 基本一致 | 高度统一 |
| **故事完整** | 仅展示数据 | 有简单解读 | 完整叙事 |
| **洞察深度** | 无洞察 | 表面分析 | 深度洞察 |
| **渐进披露** | 信息堆砌 | 有层次 | 完美分层 |
| **引导策略** | 无引导 | 有建议 | 智能引导 |

**单场景满分**: 25分  
**PRD验收标准**: 平均分 ≥ 20分 (80%)

---

## 🔄 测试执行检查表

### 每个测试必须验证:

```
□ 1. 是否有分析师式的开场白？
□ 2. 核心结论是否优先展示？
□ 3. 图表是否服务于论点？
□ 4. 文字与数据是否一致？
□ 5. 是否有业务洞察（不只是数据描述）？
□ 6. 是否有下一步引导？
□ 7. 上下文是否连贯？
□ 8. 复杂问题是否分步呈现？
□ 9. 异常是否被主动发现？
□ 10. 建议是否具体可执行？
```

---

*测试集版本: V2.0 - 叙事质量专项*  
*聚焦: 数据故事讲述能力*  
*创建日期: 2025-12-04*

